<!DOCTYPE html>    
<html lang="en">    
<head>    
    <meta charset="UTF-8">    
    <title>Extract Customer Code from PDF</title>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>    
    <script>    
        window.addEventListener('DOMContentLoaded', function() {    
            if (typeof pdfjsLib === 'undefined') {    
                alert('PDF.js failed to load.');    
                return;    
            }    
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';    
        });    
    </script>    
</head>    
<body>    
    <h2>Extract Customer Code from PDF</h2>    
    <input type="file" id="file-input" accept="application/pdf" />    
    <pre id="output"></pre>    
    
    <script>    
    document.addEventListener('DOMContentLoaded', function() {    
        const fileInput = document.getElementById('file-input');    
        const output = document.getElementById('output');    
    
        fileInput.addEventListener('change', async function(event) {    
            output.textContent = "Processing...";    
            const file = event.target.files[0];    
            if (!file) {    
                output.textContent = "No file selected.";    
                return;    
            }    
    
            try {    
                const reader = new FileReader();    
                reader.onload = async function() {    
                    try {    
                        const typedarray = new Uint8Array(reader.result);    
                        if (typeof pdfjsLib === 'undefined') {    
                            output.textContent = "pdfjsLib is not loaded.";    
                            return;    
                        }    
                        const pdf = await pdfjsLib.getDocument({ data: typedarray }).promise;    
                        let fullText = '';    
                        for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {    
                            const page = await pdf.getPage(pageNum);    
                            const content = await page.getTextContent();    
                            const pageText = content.items.map(item => item.str).join(' ');    
                            fullText += pageText + '\n';    
                        }    
                        // Show the full text for debugging    
                        output.textContent = fullText ? fullText : "[No text extracted from PDF.]";    
                        // Uncomment to enable regex extraction after verifying format    
                        /*    
                        const match = fullText.match(/Customer\s*Code[\s:\-]*([0-9]+)/i);    
                        if (match) {    
                            output.textContent = "Customer ID: " + match[1];    
                        } else {    
                            output.textContent = "Customer ID not found.";    
                        }    
                        */    
                    } catch (err2) {    
                        output.textContent = "Error while processing PDF: " + err2.message;    
                    }    
                };    
                reader.onerror = function(e) {    
                    output.textContent = "Error reading file: " + e.message;    
                };    
                reader.readAsArrayBuffer(file);    
            } catch (err) {    
                output.textContent = "Unexpected error: " + err.message;    
            }    
        });    
    });    
    </script>    
</body>    
v2
</html>    